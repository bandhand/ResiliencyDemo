# Log rotation configuration for the Next.js web application

# Application logs
/var/log/webapp/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 root root
    copytruncate
    
    postrotate
        # Restart PM2 app to refresh log handlers
        if [ -f /var/run/pm2.pid ]; then
            pm2 reloadLogs 2>/dev/null || true
        fi
    endscript
}